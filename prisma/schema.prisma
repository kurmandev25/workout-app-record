// üì¶ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma-–∫–ª–∏–µ–Ω—Ç–∞ (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î –≤ –∫–æ–¥–µ)
generator client {
  provider = "prisma-client-js"
}

// ‚öôÔ∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//
// üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
//
model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  email     String   @unique
  name      String
  password  String
  images    String[] // üñº –ú–∞—Å—Å–∏–≤ URL-–æ–≤ –∏–ª–∏ –ø—É—Ç–µ–π –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º

  // üîó –°–≤—è–∑–∏
  exerciseLogs ExerciseLog[]
  workoutLogs  WorkoutLog[]
}

//
// üèãÔ∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (Workout-—à–∞–±–ª–æ–Ω, –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
//
model Workout {
  id         Int      @id @default(autoincrement())
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  name       String
  exercises  Exercise[]     // üí™ –°–ø–∏—Å–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ
  workoutLogs WorkoutLog[]  // üìí –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
}

//
// üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
//
model Exercise {
  id         Int      @id @default(autoincrement())
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  name         String
  times        Int         // ‚è± –ö–æ–ª-–≤–æ –ø–æ–¥—Ö–æ–¥–æ–≤ (—Å–µ—Ç)
  iconPath     String      @map("icon_path") // üìå –ü—É—Ç—å –∫ –∏–∫–æ–Ω–∫–µ
  workouts     Workout[]   // üîó –ö –∫–∞–∫–∏–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è
  exerciseLogs ExerciseLog[] // üìí –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
}

//
// üìò –õ–æ–≥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
//
model WorkoutLog {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  isCompleted Boolean  @default(false) @map("is_completed") // ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
  exerciseLog ExerciseLog[] // üîó –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

  // üîó –°–≤—è–∑–∏
  User        User?    @relation(fields: [userId], references: [id])
  userId      Int?

  Workout     Workout? @relation(fields: [workoutId], references: [id])
  workoutId   Int?

  @@map("workout_log") // üóÇ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
}

//
// üìì –õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
//
model ExerciseLog {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")


  isCompleted Boolean   @default(false) @map("is_completed") // ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –ª–∏

  times       ExerciseTime[] // üîó –ú–∞—Å—Å–∏–≤ –ø–æ–¥—Ö–æ–¥–æ–≤

  // üîó –°–≤—è–∑–∏
  WorkoutLog   WorkoutLog? @relation(fields: [workoutLogId], references: [id])
  workoutLogId Int?

  User         User?       @relation(fields: [userId], references: [id])
  userId       Int?

  Exercise     Exercise?   @relation(fields: [exerciseId], references: [id])
  exerciseId   Int?

  @@map("exercise_log") // üóÇ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
}

//
// ‚è± –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–≤—Ä–µ–º—è, –≤–µ—Å, –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è)
//
model ExerciseTime {
  id           Int      @id @default(autoincrement())
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  repeat       Int      @default(0)  // üîÅ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
  weight       Int      @default(0)  // üèãÔ∏è –í–µ—Å
  isCompleted  Boolean  @default(false) @map("is_completed") // ‚úÖ –ü–æ–¥—Ö–æ–¥ –∑–∞–≤–µ—Ä—à—ë–Ω?

  // üîó –°–≤—è–∑—å —Å –ª–æ–≥–æ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
  ExerciseLog   ExerciseLog? @relation(fields: [exerciseLogId], references: [id])
  exerciseLogId Int?

  @@map("exercise_time") // üóÇ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
}